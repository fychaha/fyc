## Spring AOP

### 介绍

面向切面编程，这是一种编程技术，是oop（面向对象编程）的补充和完善。oop的执行是一种从上往下的流程，没有从左到右的关系。因此在oop编程中，会有大量代码冗余。而Aop则是将这些冗余代码提取出来，再嵌入需要的地方。常见的应用有：权限管理，日志，事务管理。

### 实现方式

spring使用的是动态代理。

1. 采用动态代理技术，利用截取消息的方式，对该消息进行装饰，以取代原有对象行为的执行；
2. 静态织入：引入特定的语法创建“方面”，从而使得编译器可以在编译期间织入有关“方面”的代码

### Spring Aop使用的动态代理原理

- jdk反射：通过反射机制生成代理类的字节码文件，调用具体方法前调用invokeHandler来处理
- cglib工具：利用asm开源包，对对代理对象类的class文件加载进来，通过修改字节码生成其自类来处理。

1. 如果目标对象实现了接口，默认情况下采用jdk的方案，也可以强致使用cglib。
2. 如果没有实现接口，必须采用cglib，spring会在两种方案中互相切换。



