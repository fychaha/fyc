# redia介绍

1. ## redis是c语言开发的高性能键值对数据库。它通过提供多种键值数据类型来适应不同场景下的需求。

   关键点：

   - c语言开发
   - 开源
   - 键值数据库
   - 内存数据库
   - noSQL

2. ## redis支持的键值数据

   - 字符串类型
   - 散列类型
   - 列表类型
   - 集合类型
   - 有序集合类型

   

3. ## redis应用场景

   - 缓存（数据查询，）
   - 分布式集群架构中的session分离。
   - 聊天室在线好友列表。
   - 应用排行榜。（社交网站微博等热搜，只关心最新的内容，使用列表类型）
   - 任务队列（秒杀，抢购）。
   - 网站访问统计。
   - 数据过期处理（短信验证码）。

4. ##  redis的持久化

   也就是将redis这个内存数据库的数据存储在硬盘中

   ## 1. RDB（redis database）

   每隔一段时间将**数据**进行快照存储

   <font color="red">执行流程</font>：在保存RDB文件的时候，父进程会fork出一个子进程。接下来的工作就由子进程来做（因为redis是单线程的）

   存储在`dump.rdb`可以在redis.conf中进行修改

   优点：可以按照固定的规则来获取固定时间的数据

   缺点：就是不能实时更新。如果每隔十分钟进行一次快照。那么如果在第九分钟挂了，那么前九分钟的数据就丢失了 

   ## 2. AOF（Append-only file）

   每次对数据库进行写操作的时候，就将这个**写操作**记录起来。每次重启服务器的时候，都重新执行这些记录**日志信息**

   优点：实时，不会丢失数据

   缺点：体积比RDB大，速度也比RDB文件加载速度慢

   <font color="red">工作原理</font>：

   

   # 使用

   一般都是两种方式同时使用

   ## RDB

   ```
   save 900 1
   # 900秒中一个键改变
   save 300 10
   # 300秒中10个键改变
   save 60 10000
   # 60秒中10000个键改变
   ```

   在配置文件中可以写成这个

   也就是三者是or的方式，只要有任意一个满足就执行快照

   如果将所有的save都注释，就相当于禁用RDB

   **替换原本的文件**，写时复制

   

   ## AOF

   追加

   将`server.conf`中的`appendonly yes`设置成yes就相当于打开AOF功能

   一般推荐使用每秒执行一次

   